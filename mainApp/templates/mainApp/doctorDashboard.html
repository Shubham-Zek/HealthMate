{% extends "mainApp/base.html" %}
{% block main %}
    <div class="flex flex-col items-center">
        <div class="w-1/6">
            <h1 class="text-3xl font-semibold text-center">Profile</h1>
            <h2 class="text-xl font-semibold">Name:{{ user.username }}</h2>
            <h2 class="text-xl font-semibold">Email: {{ user.email }}</h2>
            <h2 class="text-xl font-semibold">Specialization: {{ user.doctorprofile.specialization }}</h2>
            <h2 class="text-xl font-semibold">Experience: {{ user.doctorprofile.experience }}</h2>
            <div class="flex justify-center gap-3 mt-3">
                <button class="cursor-pointer rounded-full px-2 py-1 bg-neutral-300 text-black hover:bg-black hover:text-white"
                        hx-get="{% url "editDoctorProfile" %}">Edit Profile</button>
            </div>
        </div>
        <hr>
        <h1 class="text-3xl mt-10 font-semibold text-center">Appointments</h1>
        <ul class="flex mt-2">
            <li class="px-4 py-1 cursor-pointer hover:bg-white/50 {% if filter == "" %}bg-white text-black{% endif %}"
                hx-get="{% url "doctorDashboard" %}?filter=">All</li>
            <li class="px-4 py-1 cursor-pointer hover:bg-white/50 {% if filter == "confirmed" %}bg-white text-black{% endif %}"
                hx-get="{% url "doctorDashboard" %}?filter=confirmed">Confirmed</li>
            <li class="px-4 py-1 cursor-pointer hover:bg-white/50 {% if filter == "pending" %}bg-white text-black{% endif %}"
                hx-get="{% url "doctorDashboard" %}?filter=pending">Pending</li>
            <li class="px-4 py-1 cursor-pointer hover:bg-white/50 {% if filter == "cancelled" %}bg-white text-black{% endif %}"
                hx-get="{% url "doctorDashboard" %}?filter=cancelled">Cancelled</li>
        </ul>
        <div class="w-full mt-5 flex justify-center gap-10">
            {% for appointment in user.doctorprofile.appointments.all|dictsortreversed:"status" %}
                {% if filter == "" or filter == appointment.status|lower %}
                    <div class="my-3 rounded-xl p-3 bg-white text-black">
                        <h2 class="text-lg font-semibold">Patient: {{ appointment.patient }}</h2>
                        <h2 class="text-lg font-semibold">Date: {{ appointment.date }}</h2>
                        <h2 class="text-lg font-semibold">Time: {{ appointment.time }}</h2>
                        <h2 class="text-lg font-semibold">Status: {{ appointment.status }}</h2>
                        {% if appointment.status == 'Pending' or appointment.status == 'pending' %}
                            <button class="cursor-pointer rounded-full px-2 py-1 bg-neutral-700/75 text-white hover:bg-black"
                                    hx-get="{% url "confirmAppointment" appointment.id %}">Confirm</button>
                        {% endif %}
                    </div>
                {% endif %}
            {% endfor %}
        </div>
        <div class="flex justify-center gap-3 mt-3">
            <button>
                <a class="px-4 py-2 cursor-pointer rounded-full bg-neutral-300 text-black hover:bg-black hover:text-white"
                   href="{% url "downloadAppointmentList" %}">Download Appointment List</a>
            </button>
        </div>
    </div>
{% endblock main %}
